# وبلاگ فارسی API

این پروژه یک API برای وبلاگ فارسی با استفاده از Express  است که امکانات زیر را فراهم می‌کند:

- مدیریت دسته‌بندی‌ها
- مدیریت مقالات با امکان آپلود تصویر
- مدیریت نظرات
- ارتباط بین دسته‌بندی‌ها، مقالات و نظرات
- مستندات Swagger برای تست API

## نصب و راه‌اندازی

1. نصب وابستگی‌ها:
```
npm install
```

2. اجرای سرور:
```
npm start
```

سرور به صورت پیش‌فرض روی پورت 3000 اجرا می‌شود. می‌توانید با تنظیم متغیر محیطی PORT پورت دیگری را مشخص کنید.

## مستندات API

پس از اجرای سرور، می‌توانید به مستندات Swagger در آدرس زیر دسترسی داشته باشید:
```
http://localhost:3000/api-docs
```

## ساختار API

### دسته‌بندی‌ها (Categories)

- `GET /api/categories`: دریافت تمام دسته‌بندی‌ها
- `GET /api/categories/:id`: دریافت یک دسته‌بندی با شناسه
- `GET /api/categories/:id/articles`: دریافت مقالات مرتبط با یک دسته‌بندی
- `POST /api/categories`: ایجاد دسته‌بندی جدید
- `PUT /api/categories/:id`: بروزرسانی دسته‌بندی
- `DELETE /api/categories/:id`: حذف دسته‌بندی

### مقالات (Articles)

- `GET /api/articles`: دریافت تمام مقالات
- `GET /api/articles/:id`: دریافت یک مقاله با شناسه
- `GET /api/articles/:id/comments`: دریافت نظرات یک مقاله
- `POST /api/articles`: ایجاد مقاله جدید
- `PUT /api/articles/:id`: بروزرسانی مقاله
- `DELETE /api/articles/:id`: حذف مقاله

### نظرات (Comments)

- `GET /api/comments`: دریافت تمام نظرات
- `GET /api/comments/:id`: دریافت یک نظر با شناسه
- `POST /api/comments`: ایجاد نظر جدید
- `PUT /api/comments/:id`: بروزرسانی نظر
- `DELETE /api/comments/:id`: حذف نظر

## ساختار پایگاه داده

پایگاه داده در فایل `db.json` ذخیره می‌شود و شامل سه مجموعه است:

1. `categories`: دسته‌بندی‌ها
2. `articles`: مقالات (با فیلد جدید `image` برای ذخیره مسیر تصویر)
3. `comments`: نظرات

## ارتباطات

- هر مقاله می‌تواند به یک دسته‌بندی متصل باشد (با فیلد `categoryId`)
- هر نظر به یک مقاله متصل است (با فیلد `articleId`)

## مدیریت تصاویر

تصاویر مقالات در پوشه `public` ذخیره می‌شوند و از طریق آدرس `/public/[filename]` قابل دسترسی هستند. برای مثال، تصویر با نام `1.png` از طریق آدرس `http://localhost:3000/public/1.png` قابل دسترسی است.

برای اضافه کردن تصویر به یک مقاله، کافی است مسیر تصویر را در فیلد `image` مقاله قرار دهید. مثال:

```json
{
  "title": "عنوان مقاله",
  "content": "محتوای مقاله",
  "image": "/public/1.png",
  "categoryId": "cat1"
}
``` 
